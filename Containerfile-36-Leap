FROM registry.opensuse.org/opensuse/leap:15.3

RUN zypper --non-interactive install python3 python3-devel python3-pip
RUN python3 -m pip install pyperformance

WORKDIR /pyperformance
RUN pyperformance venv create --venv venv


VOLUME /benchmarks
ENTRYPOINT pyperformance run --venv venv --python=venv/bin/python -o /benchmarks/leap-$(venv/bin/python --version | awk '{print $2}').json
